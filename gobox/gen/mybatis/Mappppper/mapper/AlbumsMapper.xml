<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://raw.githubusercontent.com/ltto/GoMybatis/master/mybatis-3-mapper.dtd">
<mapper>
    <!--logic_enable 逻辑删除字段-->
    <!--logic_deleted 逻辑删除已删除字段-->
    <!--logic_undelete 逻辑删除 未删除字段-->
    <!--version_enable 乐观锁版本字段,支持int,int8,int16,int32,int64-->
    <resultMap id="BaseResultMap" tables="biz_user_address">
        <id column="cid" property="Cid" langType="int"/>
        <result column="userID" property="UserID" langType="int"/>
        <result column="name" property="Name" langType="string"/>
        <result column="URL" property="URL" langType="string"/>
        <result column="createdAt" property="CreatedAt" langType="time.Time"/>
        <result column="updatedAt" property="UpdatedAt" langType="time.Time"/>
        <result column="deletedAt" property="DeletedAt" langType="time.Time"/>

    </resultMap>

    <sql id="base">
        `cid`, `userID`, `name`, `URL`, `createdAt`, `updatedAt`, `deletedAt`
    </sql>
    <!-- insert -->
    <insert id="Save" useGeneratedKeys="true">
        INSERT INTO `albums`(<include refid="base"/>) VALUES( null, #{obj.UserID}, #{obj.Name}, #{obj.URL}, #{obj.CreatedAt}, #{obj.UpdatedAt}, #{obj.DeletedAt})
    </insert>
    <!-- selectOne -->
    <select id="SelectByID">
        SELECT
        <include refid="base"/>
        FROM `albums` WhERE `cid` = #{cid}
    </select>

    <select id="SelectLimit">
        SELECT
        <include refid="base"/>
        FROM `albums`
        limit #{o},#{l}
    </select>

	<select id="SelectCount">
        SELECT count(1) FROM `albums`
    </select>

    <!-- update -->
    <update id="UpdateByID">
        UPDATE `albums` SET `cid`=#{obj.cid} 
        <if test="obj.Cid.Valid">,`cid` = #{obj.Cid}</if>
        <if test="obj.UserID.Valid">,`userID` = #{obj.UserID}</if>
        <if test="obj.Name.Valid">,`name` = #{obj.Name}</if>
        <if test="obj.URL.Valid">,`URL` = #{obj.URL}</if>
        <if test="obj.CreatedAt.Valid">,`createdAt` = #{obj.CreatedAt}</if>
        <if test="obj.UpdatedAt.Valid">,`updatedAt` = #{obj.UpdatedAt}</if>
        <if test="obj.DeletedAt.Valid">,`deletedAt` = #{obj.DeletedAt}</if>
        WHERE `cid`=#{obj.cid}
    </update>

    <!--delete one-->
    <delete id="DeleteByID">
        delete FROM `albums` WHERE `cid`=#{cid}
    </delete>

    <!-- delete list -->
    <delete id="DeleteByIDs">
        delete FROM `albums` WHERE `cid` in
        <foreach item="item" index="index" collection="ids" open="(" separator="," close=")">#{item}</foreach>
    </delete>
</mapper>
